# 以下全是Ai生成，实际上有很多功能没有实现。待补充

# AI陪伴系统

> 应TraeCN编写

## 项目介绍

AI陪伴系统是一个基于本地小模型的智能对话助手，支持语音输出功能。系统采用前后端分离架构，提供友好的GUI界面，能够理解用户意图并提供温暖贴心的回应。

### 核心功能

- 🎯 智能对话：基于本地小模型的自然语言交互
- 🎵 语音输出：支持语音合成，带有情感色彩
- 📱 友好界面：现代化GUI设计，支持背景图片
- 📝 对话历史：自动保存聊天记录
- 🔄 实时响应：使用线程处理语音播放，避免界面卡顿

## 技术栈

| 类别 | 技术/库 | 用途 |
|------|---------|------|
| 前端 | Tkinter | GUI界面开发 |
| 语音 | pyttsx3 | 文本转语音 |
| 后端 | Python | 核心业务逻辑 |
| 打包 | PyInstaller | 可执行文件生成 |
| 依赖管理 | Conda/venv | 环境管理 |

## 系统要求

- **操作系统**：Windows 10/11
- **Python版本**：3.9+
- **硬件要求**：
  - CPU：Intel i5 或同等性能
  - 内存：4GB+（建议8GB+）
  - 存储空间：500MB+可用空间
- **软件依赖**：
  - Python标准库
  - tkinter
  - Pillow (PIL)
  - pyttsx3
  - 其他必要依赖

## 部署指南

### 方法一：使用已构建的可执行文件（暂未开放）

> ⚠️ 当前版本暂未提供预编译的可执行文件，敬请期待后续更新。

如需体验，请采用「方法二：从源代码运行」进行本地部署。

### 方法二：从源代码运行

#### 步骤1：准备Python环境

```bash
# 方法A：使用Conda环境
conda env create -f environment.yml
conda activate AiCompany

# 方法B：使用虚拟环境
python -m venv AiCompany
AiCompany\Scripts\activate
```

#### 步骤2：安装依赖

```bash
# 安装核心依赖
pip install pillow pyttsx3

# 安装其他必要依赖
pip install numpy scipy
```

#### 步骤3：运行程序

```bash
# 方法A：直接运行GUI程序
python gui_chat.py

# 方法B：运行带输出的版本
python run_with_output.py
```

### 方法三：重新构建可执行文件

```bash
# 安装PyInstaller
pip install pyinstaller

# 执行构建
pyinstaller ai_companion_gui.spec

# 构建完成后，可执行文件在 dist/ 目录
```

## 配置说明

### 首次运行配置

1. **日志保存路径**：首次运行时会提示设置日志保存路径，默认为 `./logs`
2. **语音参数**：系统会自动配置语音参数，使用女声，婉转悠扬

### 背景图片设置

- 默认背景图片：`photo1.jpg`
- 如需更换背景，将新图片命名为同名文件替换即可

### 语音设置

系统会自动选择适合的女声，若需调整语音参数，请修改 `gui_chat.py` 中的 `setup_voice_parameters` 方法。

## 目录结构

```
AiCompany/
├── ai_companion_system/    # 后端系统
│   └── backend/            # 后端服务
├── build/                  # 构建输出目录
├── logs/                   # 日志存储目录
├── gui_chat.py             # 主GUI程序
├── run_with_output.py      # 带输出的运行版本
├── *.spec                  # PyInstaller打包配置
├── photo1.jpg              # 背景图片
└── README.md               # 项目说明
```

## 使用指南

1. **启动程序**：运行 `gui_chat.py` 或构建后的可执行文件
2. **配置日志路径**：首次运行时设置日志保存位置
3. **开始对话**：在输入框中输入消息，按回车键或点击"发送"按钮
4. **语音回应**：系统会自动语音播放回复内容
5. **刷新对话**：点击"刷新"按钮清空聊天历史

## 常见问题

### Q: 语音播放失败怎么办？
**A:** 检查系统音频设备是否正常，确保pyttsx3库正确安装。

### Q: 程序启动后界面很小怎么办？
**A:** 程序已修复此问题，窗口会自动设置为600×500像素的大小。

### Q: 聊天历史区域背景不透明怎么办？
**A:** 系统使用Text+Scrollbar组合实现，背景色设置为浅灰色以融合背景图片效果。

### Q: 本地模型初始化失败怎么办？
**A:** 系统会自动切换到简单回复模式，仍可正常使用基本对话功能。

## 技术支持

- **问题反馈**：请查看 `logs/` 目录下的日志文件
- **调试模式**：运行 `run_with_output.py` 可查看详细输出
- **配置文件**：后端配置位于 `ai_companion_system/backend/.env`

## 注意事项

1. **性能优化**：建议在CPU性能较好的设备上运行，以获得最佳响应速度
2. **存储空间**：定期清理 `logs/` 目录，避免日志文件过大
3. **隐私保护**：所有对话数据仅存储在本地，不会上传至云端
4. **稳定性**：如遇程序崩溃，请查看日志文件获取详细错误信息

## 许可证

本项目仅供学习和个人使用，未经授权请勿用于商业目的。

---

**TraeCN** | 2026
